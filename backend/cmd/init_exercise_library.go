package main

import (
	"database/sql"
	"fmt"
	"log"
	"time"

	_ "github.com/mattn/go-sqlite3"
)

type Exercise struct {
	Name         string
	Description  string
	MuscleGroup  string
	Difficulty   string
	Equipment    string
	Sets         int
	Reps         int
	Weight       float64
	RestSeconds  int
	Instructions string
	ImageURL     string
	VideoURL     string
	Calories     int
	Notes        string
}

func main() {
	// 连接数据库
	db, err := sql.Open("sqlite3", "gymates.db")
	if err != nil {
		log.Fatal("数据库连接失败:", err)
	}
	defer db.Close()

	// 清空现有动作数据
	_, err = db.Exec("DELETE FROM exercises")
	if err != nil {
		log.Fatal("清空动作数据失败:", err)
	}

	// 定义完整的动作库
	exercises := []Exercise{
		// 胸部动作 (15个)
		{"俯卧撑", "经典的上肢训练动作", "chest", "beginner", "无器械", 3, 15, 0, 60, "保持身体挺直，双手与肩同宽", "", "", 50, "适合初学者"},
		{"平板卧推", "经典胸部训练动作", "chest", "intermediate", "杠铃", 4, 10, 60, 90, "平躺在卧推凳上，双手握杠铃", "", "", 80, "注意安全"},
		{"上斜卧推", "上胸部训练", "chest", "intermediate", "杠铃", 3, 12, 50, 90, "上斜角度30-45度", "", "", 70, "重点训练上胸"},
		{"哑铃飞鸟", "胸部拉伸动作", "chest", "intermediate", "哑铃", 3, 12, 20, 60, "双臂展开呈弧形", "", "", 60, "感受胸部拉伸"},
		{"下斜卧推", "下胸部训练", "chest", "intermediate", "杠铃", 3, 10, 55, 90, "下斜角度15-30度", "", "", 75, "重点训练下胸"},
		{"双杠臂屈伸", "胸部自重训练", "chest", "advanced", "双杠", 3, 8, 0, 120, "身体前倾，重点训练胸部", "", "", 70, "高级动作"},
		{"绳索夹胸", "胸部塑形", "chest", "intermediate", "绳索", 3, 15, 0, 60, "双臂向中间夹紧", "", "", 55, "塑形效果佳"},
		{"哑铃卧推", "胸部力量训练", "chest", "intermediate", "哑铃", 4, 10, 25, 90, "双手持哑铃卧推", "", "", 75, "自由重量训练"},
		{"上斜哑铃飞鸟", "上胸塑形", "chest", "intermediate", "哑铃", 3, 12, 15, 60, "上斜角度哑铃飞鸟", "", "", 65, "上胸塑形"},
		{"下斜哑铃飞鸟", "下胸塑形", "chest", "intermediate", "哑铃", 3, 12, 15, 60, "下斜角度哑铃飞鸟", "", "", 65, "下胸塑形"},
		{"宽距俯卧撑", "胸部宽度训练", "chest", "intermediate", "无器械", 3, 12, 0, 60, "双手距离比肩宽", "", "", 55, "胸部宽度"},
		{"窄距俯卧撑", "胸部厚度训练", "chest", "intermediate", "无器械", 3, 10, 0, 60, "双手距离比肩窄", "", "", 60, "胸部厚度"},
		{"上斜俯卧撑", "上胸自重训练", "chest", "beginner", "无器械", 3, 15, 0, 60, "脚部抬高俯卧撑", "", "", 50, "上胸训练"},
		{"下斜俯卧撑", "下胸自重训练", "chest", "intermediate", "无器械", 3, 12, 0, 60, "手部抬高俯卧撑", "", "", 55, "下胸训练"},
		{"单臂俯卧撑", "胸部单侧训练", "chest", "advanced", "无器械", 3, 5, 0, 120, "单臂俯卧撑", "", "", 80, "高级动作"},

		// 背部动作 (20个)
		{"引体向上", "背部训练经典动作", "back", "intermediate", "单杠", 3, 8, 0, 120, "双手正握单杠，身体垂直上拉", "", "", 80, "自重训练"},
		{"杠铃划船", "背部厚度训练", "back", "intermediate", "杠铃", 4, 10, 50, 90, "俯身划船，背部发力", "", "", 85, "重点训练中背部"},
		{"高位下拉", "背部宽度训练", "back", "intermediate", "下拉器", 4, 12, 0, 90, "下拉至胸部，背部收缩", "", "", 75, "重点训练背阔肌"},
		{"坐姿绳索划船", "背部中下部训练", "back", "intermediate", "绳索", 3, 12, 0, 90, "坐姿划船，背部后缩", "", "", 70, "稳定训练"},
		{"哑铃划船", "单侧背部训练", "back", "intermediate", "哑铃", 3, 12, 25, 90, "单臂哑铃划船", "", "", 65, "单侧训练"},
		{"T杠划船", "背部厚度训练", "back", "intermediate", "T杠", 4, 10, 40, 90, "T杠划船动作", "", "", 80, "传统训练"},
		{"单臂哑铃划船", "背部单侧训练", "back", "intermediate", "哑铃", 3, 12, 20, 90, "单臂哑铃划船", "", "", 60, "单侧强化"},
		{"直臂下拉", "背部宽度训练", "back", "intermediate", "绳索", 3, 15, 0, 60, "直臂下拉动作", "", "", 55, "背部宽度"},
		{"反向飞鸟", "后三角肌训练", "back", "intermediate", "哑铃", 3, 15, 10, 60, "反向飞鸟动作", "", "", 45, "后三角肌"},
		{"面拉", "后三角肌训练", "back", "intermediate", "绳索", 3, 15, 0, 60, "面拉动作", "", "", 50, "后三角肌"},
		{"俯身划船", "背部厚度训练", "back", "intermediate", "杠铃", 4, 10, 45, 90, "俯身划船动作", "", "", 75, "传统训练"},
		{"反手引体", "背部训练", "back", "intermediate", "单杠", 3, 8, 0, 120, "反手握法引体向上", "", "", 80, "不同握法"},
		{"硬拉", "全身复合动作", "back", "advanced", "杠铃", 5, 5, 100, 180, "全身硬拉动作", "", "", 120, "复合动作"},
		{"海豹划船", "背部训练", "back", "intermediate", "杠铃", 3, 12, 30, 90, "海豹划船动作", "", "", 70, "特殊动作"},
		{"宽握引体向上", "背部宽度训练", "back", "intermediate", "单杠", 3, 8, 0, 120, "宽握引体向上", "", "", 85, "背部宽度"},
		{"窄握引体向上", "背部厚度训练", "back", "intermediate", "单杠", 3, 8, 0, 120, "窄握引体向上", "", "", 80, "背部厚度"},
		{"对握引体向上", "背部训练", "back", "intermediate", "单杠", 3, 8, 0, 120, "对握引体向上", "", "", 75, "中性握法"},
		{"绳索直臂下拉", "背部宽度训练", "back", "intermediate", "绳索", 3, 15, 0, 60, "绳索直臂下拉", "", "", 60, "背部宽度"},
		{"单臂绳索划船", "背部单侧训练", "back", "intermediate", "绳索", 3, 12, 0, 90, "单臂绳索划船", "", "", 65, "单侧训练"},
		{"杠铃耸肩", "斜方肌训练", "back", "intermediate", "杠铃", 4, 12, 30, 60, "杠铃耸肩", "", "", 50, "斜方肌训练"},

		// 腿部动作 (18个)
		{"深蹲", "经典的下肢训练动作", "legs", "intermediate", "杠铃", 4, 12, 80, 120, "双脚与肩同宽，下蹲至大腿平行地面", "", "", 100, "下肢基础动作"},
		{"前蹲", "腿部前侧训练", "legs", "advanced", "杠铃", 4, 10, 70, 120, "杠铃置于胸前", "", "", 95, "前侧重点"},
		{"保加利亚分腿蹲", "单腿训练", "legs", "intermediate", "哑铃", 3, 12, 20, 90, "单腿分腿蹲", "", "", 80, "单腿训练"},
		{"腿举", "腿部力量训练", "legs", "intermediate", "腿举机", 4, 15, 0, 90, "腿部推举动作", "", "", 85, "器械训练"},
		{"弓步蹲", "腿部功能性训练", "legs", "intermediate", "哑铃", 3, 12, 15, 90, "弓步蹲动作", "", "", 75, "功能性训练"},
		{"罗马尼亚硬拉", "腿部后侧训练", "legs", "intermediate", "杠铃", 4, 10, 60, 120, "罗马尼亚硬拉", "", "", 90, "后侧重点"},
		{"提踵", "小腿训练", "legs", "beginner", "杠铃", 4, 20, 40, 60, "小腿提踵动作", "", "", 40, "小腿训练"},
		{"单腿深蹲", "单腿力量训练", "legs", "advanced", "无器械", 3, 8, 0, 120, "单腿深蹲", "", "", 70, "高级动作"},
		{"腿弯举", "腿部后侧训练", "legs", "intermediate", "腿弯举机", 3, 15, 0, 90, "腿部弯举", "", "", 60, "后侧训练"},
		{"腿屈伸", "腿部前侧训练", "legs", "intermediate", "腿屈伸机", 3, 15, 0, 90, "腿部屈伸", "", "", 55, "前侧训练"},
		{"相扑深蹲", "腿部内侧训练", "legs", "intermediate", "杠铃", 4, 12, 60, 120, "双脚宽距深蹲", "", "", 85, "内侧训练"},
		{"侧弓步", "腿部侧向训练", "legs", "intermediate", "无器械", 3, 12, 0, 90, "侧向弓步", "", "", 70, "侧向训练"},
		{"跳箱", "腿部爆发力训练", "legs", "advanced", "跳箱", 3, 10, 0, 120, "跳箱训练", "", "", 90, "爆发力训练"},
		{"单腿提踵", "小腿单侧训练", "legs", "intermediate", "无器械", 3, 15, 0, 60, "单腿提踵", "", "", 35, "小腿单侧"},
		{"墙蹲", "腿部耐力训练", "legs", "beginner", "无器械", 3, 1, 0, 60, "靠墙深蹲", "", "", 50, "耐力训练"},
		{"手枪深蹲", "单腿高级训练", "legs", "advanced", "无器械", 3, 5, 0, 120, "单腿深蹲", "", "", 80, "高级动作"},
		{"哈克深蹲", "腿部力量训练", "legs", "intermediate", "哈克深蹲机", 4, 12, 0, 90, "哈克深蹲", "", "", 90, "器械训练"},
		{"坐姿提踵", "小腿训练", "legs", "beginner", "坐姿提踵机", 4, 20, 0, 60, "坐姿提踵", "", "", 40, "小腿训练"},

		// 肩部动作 (12个)
		{"肩推", "肩部力量训练", "shoulders", "intermediate", "哑铃", 4, 10, 20, 90, "双手持哑铃，从肩部推举至头顶", "", "", 70, "肩部基础"},
		{"侧平举", "肩部宽度训练", "shoulders", "intermediate", "哑铃", 3, 15, 10, 60, "侧平举动作", "", "", 45, "肩部宽度"},
		{"前平举", "肩部前束训练", "shoulders", "intermediate", "哑铃", 3, 12, 8, 60, "前平举动作", "", "", 40, "前束训练"},
		{"俯身侧平举", "肩部后束训练", "shoulders", "intermediate", "哑铃", 3, 12, 8, 60, "俯身侧平举", "", "", 45, "后束训练"},
		{"阿诺德推举", "肩部复合训练", "shoulders", "advanced", "哑铃", 4, 10, 15, 90, "阿诺德推举", "", "", 65, "复合动作"},
		{"杠铃推举", "肩部力量训练", "shoulders", "intermediate", "杠铃", 4, 8, 30, 120, "杠铃推举", "", "", 75, "力量训练"},
		{"绳索侧平举", "肩部塑形", "shoulders", "intermediate", "绳索", 3, 15, 0, 60, "绳索侧平举", "", "", 50, "塑形训练"},
		{"杠铃前平举", "肩部前束训练", "shoulders", "intermediate", "杠铃", 3, 12, 15, 60, "杠铃前平举", "", "", 55, "前束力量"},
		{"绳索前平举", "肩部前束训练", "shoulders", "intermediate", "绳索", 3, 15, 0, 60, "绳索前平举", "", "", 45, "前束塑形"},
		{"绳索后平举", "肩部后束训练", "shoulders", "intermediate", "绳索", 3, 15, 0, 60, "绳索后平举", "", "", 50, "后束塑形"},
		{"杠铃耸肩", "斜方肌训练", "shoulders", "intermediate", "杠铃", 4, 12, 40, 60, "杠铃耸肩", "", "", 60, "斜方肌"},
		{"哑铃耸肩", "斜方肌训练", "shoulders", "intermediate", "哑铃", 4, 12, 20, 60, "哑铃耸肩", "", "", 55, "斜方肌"},

		// 手臂动作 (15个)
		{"二头弯举", "二头肌训练", "arms", "beginner", "哑铃", 3, 12, 15, 60, "二头弯举动作", "", "", 40, "二头基础"},
		{"三头屈伸", "三头肌训练", "arms", "intermediate", "哑铃", 3, 12, 20, 60, "三头屈伸动作", "", "", 45, "三头训练"},
		{"锤式弯举", "二头肌训练", "arms", "intermediate", "哑铃", 3, 12, 12, 60, "锤式弯举", "", "", 35, "不同握法"},
		{"窄握卧推", "三头肌训练", "arms", "intermediate", "杠铃", 4, 10, 40, 90, "窄握卧推", "", "", 60, "三头力量"},
		{"绳索下压", "三头肌训练", "arms", "intermediate", "绳索", 3, 15, 0, 60, "绳索下压", "", "", 40, "三头塑形"},
		{"集中弯举", "二头肌训练", "arms", "intermediate", "哑铃", 3, 12, 10, 60, "集中弯举", "", "", 30, "孤立训练"},
		{"过顶臂屈伸", "三头肌训练", "arms", "intermediate", "哑铃", 3, 12, 15, 60, "过顶臂屈伸", "", "", 40, "三头拉伸"},
		{"杠铃弯举", "二头肌力量训练", "arms", "intermediate", "杠铃", 4, 10, 25, 90, "杠铃弯举", "", "", 50, "二头力量"},
		{"绳索弯举", "二头肌训练", "arms", "intermediate", "绳索", 3, 15, 0, 60, "绳索弯举", "", "", 35, "二头塑形"},
		{"三头臂屈伸", "三头肌训练", "arms", "intermediate", "无器械", 3, 12, 0, 60, "三头臂屈伸", "", "", 40, "自重训练"},
		{"反向弯举", "前臂训练", "arms", "intermediate", "杠铃", 3, 12, 15, 60, "反向弯举", "", "", 30, "前臂训练"},
		{"杠铃腕弯举", "前臂训练", "arms", "beginner", "杠铃", 3, 15, 10, 60, "杠铃腕弯举", "", "", 25, "前臂力量"},
		{"绳索锤式弯举", "二头肌训练", "arms", "intermediate", "绳索", 3, 15, 0, 60, "绳索锤式弯举", "", "", 40, "二头塑形"},
		{"单臂绳索下压", "三头肌单侧训练", "arms", "intermediate", "绳索", 3, 12, 0, 60, "单臂绳索下压", "", "", 35, "三头单侧"},
		{"单臂哑铃弯举", "二头肌单侧训练", "arms", "intermediate", "哑铃", 3, 12, 12, 60, "单臂哑铃弯举", "", "", 30, "二头单侧"},

		// 核心动作 (18个)
		{"平板支撑", "核心力量训练", "core", "beginner", "无器械", 3, 1, 0, 60, "保持身体成一条直线，核心收紧", "", "", 30, "核心基础"},
		{"卷腹", "腹肌训练", "core", "beginner", "无器械", 3, 20, 0, 30, "卷腹动作", "", "", 25, "腹肌训练"},
		{"俄罗斯转体", "腹肌训练", "core", "intermediate", "无器械", 3, 20, 0, 30, "俄罗斯转体", "", "", 30, "腹肌旋转"},
		{"登山者", "全身有氧", "core", "intermediate", "无器械", 3, 30, 0, 60, "登山者动作", "", "", 50, "有氧训练"},
		{"死虫式", "核心稳定", "core", "beginner", "无器械", 3, 10, 0, 30, "死虫式动作", "", "", 20, "核心稳定"},
		{"侧平板支撑", "核心侧向训练", "core", "intermediate", "无器械", 3, 1, 0, 60, "侧平板支撑", "", "", 35, "侧向训练"},
		{"悬垂举腿", "腹肌训练", "core", "advanced", "单杠", 3, 12, 0, 90, "悬垂举腿", "", "", 60, "高级动作"},
		{"龙旗", "腹肌训练", "core", "advanced", "无器械", 3, 8, 0, 120, "龙旗动作", "", "", 70, "高级动作"},
		{"农夫行走", "全身训练", "core", "intermediate", "哑铃", 3, 1, 30, 120, "农夫行走", "", "", 80, "功能性训练"},
		{"土耳其起立", "全身训练", "core", "advanced", "哑铃", 3, 5, 20, 120, "土耳其起立", "", "", 90, "复合动作"},
		{"仰卧起坐", "腹肌训练", "core", "beginner", "无器械", 3, 15, 0, 30, "仰卧起坐", "", "", 30, "腹肌基础"},
		{"自行车卷腹", "腹肌训练", "core", "intermediate", "无器械", 3, 20, 0, 30, "自行车卷腹", "", "", 35, "腹肌训练"},
		{"侧卷腹", "腹肌侧向训练", "core", "intermediate", "无器械", 3, 15, 0, 30, "侧卷腹", "", "", 25, "腹肌侧向"},
		{"反向卷腹", "下腹训练", "core", "intermediate", "无器械", 3, 15, 0, 30, "反向卷腹", "", "", 30, "下腹训练"},
		{"V字卷腹", "腹肌训练", "core", "intermediate", "无器械", 3, 12, 0, 30, "V字卷腹", "", "", 40, "腹肌训练"},
		{"侧支撑", "核心侧向训练", "core", "intermediate", "无器械", 3, 1, 0, 60, "侧支撑", "", "", 35, "侧向训练"},
		{"鸟狗式", "核心稳定", "core", "beginner", "无器械", 3, 10, 0, 30, "鸟狗式", "", "", 25, "核心稳定"},
		{"超人式", "背部核心训练", "core", "beginner", "无器械", 3, 10, 0, 30, "超人式", "", "", 20, "背部核心"},
	}

	// 插入动作数据
	stmt, err := db.Prepare(`
		INSERT INTO exercises (
			training_plan_id, name, description, muscle_group, difficulty, equipment, 
			sets, reps, weight, rest_seconds, instructions, 
			image_url, video_url, calories, notes, 
			created_at, updated_at, "order"
		) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
	`)
	if err != nil {
		log.Fatal("准备插入语句失败:", err)
	}
	defer stmt.Close()

	now := time.Now()
	trainingPlanID := 4 // 动作库训练计划ID
	for i, exercise := range exercises {
		_, err = stmt.Exec(
			trainingPlanID,
			exercise.Name,
			exercise.Description,
			exercise.MuscleGroup,
			exercise.Difficulty,
			exercise.Equipment,
			exercise.Sets,
			exercise.Reps,
			exercise.Weight,
			exercise.RestSeconds,
			exercise.Instructions,
			exercise.ImageURL,
			exercise.VideoURL,
			exercise.Calories,
			exercise.Notes,
			now,
			now,
			i+1, // order字段
		)
		if err != nil {
			log.Printf("插入动作失败 %s: %v", exercise.Name, err)
		}
	}

	fmt.Printf("✅ 成功初始化 %d 个训练动作\n", len(exercises))

	// 显示各部位动作数量
	muscleGroups := map[string]int{}
	for _, exercise := range exercises {
		muscleGroups[exercise.MuscleGroup]++
	}

	fmt.Println("\n📊 各部位动作数量:")
	fmt.Printf("  🏋️ 胸部: %d 个动作\n", muscleGroups["chest"])
	fmt.Printf("  💪 背部: %d 个动作\n", muscleGroups["back"])
	fmt.Printf("  🦵 腿部: %d 个动作\n", muscleGroups["legs"])
	fmt.Printf("  🤸 肩部: %d 个动作\n", muscleGroups["shoulders"])
	fmt.Printf("  💪 手臂: %d 个动作\n", muscleGroups["arms"])
	fmt.Printf("  🏃 核心: %d 个动作\n", muscleGroups["core"])
	fmt.Printf("\n🎯 总计: %d 个训练动作", len(exercises))
}
